<!DOCTYPE html>
<html>
<head>
  <title>LittleCPay – Platform</title>
  <style>
    body { font-family:Arial; background:#020617; color:#e5e7eb; padding:20px; }
    h1 { color:#38bdf8; }
    table { width:100%; border-collapse:collapse; margin-top:15px; }
    th, td { border-bottom:1px solid #1e293b; padding:8px; }
    th { color:#38bdf8; }
    .confirmed { color:#22c55e; }
  </style>
</head>
<body>

<h1>LittleCPay Platform Dashboard</h1>
<p>All merchants • All deposits</p>

<table>
  <thead>
    <tr>
      <th>Merchant</th>
      <th>Deposit ID</th>
      <th>Amount</th>
      <th>Network</th>
      <th>TxID</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody id="rows"></tbody>
</table>

<pre id="webhook"></pre>

<script>
function loadAll() {
  const deposits = JSON.parse(localStorage.getItem("littlecpay_deposits")) || [];
  const rows = document.getElementById("rows");
  rows.innerHTML = "";

  deposits.slice().reverse().forEach(d => {
    rows.innerHTML += `
      <tr>
        <td>${d.merchant}</td>
        <td>${d.deposit_id}</td>
        <td>${d.amount} USDT</td>
        <td>${d.network}</td>
        <td>${d.txid || "—"}</td>
        <td class="confirmed">${d.status}</td>
      </tr>
    `;
  });

  if (deposits.length) {
    document.getElementById("webhook").innerText =
      JSON.stringify({
        gateway: "LittleCPay",
        event: "deposit.confirmed",
        data: deposits[deposits.length - 1]
      }, null, 2);
  }
}

loadAll();
setInterval(loadAll, 3000);
</script>
</body>
</html>
